{"ast":null,"code":"import _regeneratorRuntime from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport axios from 'axios';\nimport queryString from 'query-string';\nimport authHelpers from \"../../services/helpers\";\n\nvar HttpClient = function HttpClient(baseURL) {\n  var _this = this;\n\n  _classCallCheck(this, HttpClient);\n\n  _defineProperty(this, \"instance\", void 0);\n\n  _defineProperty(this, \"requestInterceptor\", function () {\n    _this.instance.interceptors.request.use( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(config) {\n        var authBearer;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                authBearer = authHelpers.getCrmAccessToken(); // is development mode\n                // if (process.env.NODE_ENV === 'development') {\n\n                config.headers.Authorization = \"Bearer \".concat(authBearer);\n                return _context.abrupt(\"return\", config);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  });\n\n  _defineProperty(this, \"responseInterceptor\", function () {\n    _this.instance.interceptors.response.use(_this._handleResponse, _this.handleError);\n  });\n\n  _defineProperty(this, \"_handleResponse\", function (_ref2) {\n    var data = _ref2.data;\n    return {\n      data: data\n    };\n  });\n\n  _defineProperty(this, \"handleError\", function (error) {\n    throw error;\n  });\n\n  this.instance = axios.create({\n    baseURL: baseURL,\n    headers: {\n      'content-type': 'application/json'\n    },\n    paramsSerializer: function paramsSerializer(params) {\n      return queryString.stringify(params);\n    }\n  });\n  this.requestInterceptor();\n  this.responseInterceptor();\n};\n\nexport { HttpClient as default };","map":null,"metadata":{},"sourceType":"module"}