{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/admin/Documents/personal-site/src/containers/Products/detail.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Formik, Form } from \"formik\";\nimport * as Yup from \"yup\";\nimport { FileUploader } from \"react-drag-drop-files\";\nimport toastr from \"toastr\";\nimport { useTranslation } from \"react-i18next\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { PRODUCT_STATUS_VI, PRODUCT_STATUS_EN } from \"./constants\";\nimport InputField from \"../../components/ModalCreate/InputField\";\nimport SelectField from \"../../components/ModalCreate/SelectField\";\nimport CurrencyInput from \"../../components/ModalCreate/CurrencyInput\";\nimport { fetchProductAction } from \"src/state-management/actions/products\";\nimport Cookies from \"js-cookie\";\nimport { ProjectAPI } from \"../../services/identity/project-api\";\nimport { ProductstAPI } from \"../../services/identity/products\";\nimport Select from \"react-select\";\nconst servicesProjectAPI = new ProjectAPI();\nconst servicesProductAPI = new ProductstAPI();\n\nconst ProductDetailContainer = ({}) => {\n  const {\n    t: translator\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const lang = Cookies.get(\"lang\");\n  const companyID = Cookies.get(\"companyID\");\n  const companyName = Cookies.get(\"companyName\");\n  const {\n    0: file,\n    1: setFile\n  } = useState(null);\n  const {\n    0: listAttachments,\n    1: setlistAttachments\n  } = useState([]);\n  const {\n    0: errUpload,\n    1: setErrUpload\n  } = useState(\"\");\n  const {\n    0: listProject,\n    1: setListProject\n  } = useState([]);\n  const {\n    0: projectNameSelect,\n    1: setProjectNameSelect\n  } = useState({\n    label: \"\",\n    value: \"\"\n  });\n  const {\n    0: projectStatusSelect,\n    1: setProjectStatusSelect\n  } = useState({\n    label: \"\",\n    value: \"\"\n  });\n  const {\n    productDetail: productId\n  } = router.query;\n  const {\n    0: selectedProject,\n    1: setSelectedProject\n  } = useState({\n    label: \"\",\n    value: \"\"\n  });\n  const productById = useSelector(state => state.products.productById);\n  const projects = useSelector(state => {\n    var _state$projects$all;\n\n    return (_state$projects$all = state.projects.all) === null || _state$projects$all === void 0 ? void 0 : _state$projects$all.items;\n  });\n  const validate = Yup.object({\n    productName: Yup.string().max(100, `${translator(\"product_page.text_product_name\")} ${translator(\"product_page.validate_100_characters\")}`).required(\"Required\") // floor: Yup.string().matches(\n    //   /^[a-zA-Z0-9]+$/,\n    //   `#${translator(\"product_page.text_floor_caution\")}`\n    // ),\n    // block: Yup.string().max(\n    //   100,\n    //   `Block ${translator(\"product_page.validate_100_characters\")}`\n    // ),\n    // note: Yup.string().max(\n    //   1000,\n    //   `${translator(\"product_page.text_note\")} ${translator(\n    //     \"product_page.validate_1000_characters\"\n    //   )}`\n    // ),\n\n  });\n\n  function formatDate(date) {\n    var d = new Date(date),\n        month = \"\" + (d.getMonth() + 1),\n        day = \"\" + d.getDate(),\n        year = d.getFullYear();\n    if (month.length < 2) month = \"0\" + month;\n    if (day.length < 2) day = \"0\" + day;\n    return [day, month, year].join(\"-\");\n  }\n\n  const handleChange = file => {\n    let fileName = file.name;\n    let fileSize = file.size;\n    let fileDate = formatDate(file.lastModifiedDate);\n    let fileNameArr = fileName.split(\".\");\n    let fileType = fileNameArr[fileNameArr.length - 1];\n    let item = {\n      name: fileName,\n      fileSize: fileSize,\n      fileDate: fileDate,\n      fileType: fileType\n    };\n    listAttachments.push(item);\n    setFile(file);\n    setlistAttachments(listAttachments);\n    setErrUpload(\"\");\n  };\n\n  const onSizeError = () => {\n    setErrUpload(\"Uploaded files must be smaller than 20mb\");\n  };\n\n  const removeAttachment = index => {\n    listAttachments.splice(index, 1);\n    setlistAttachments(listAttachments);\n    setFile(listAttachments);\n  };\n\n  const getInitProjectStatus = useMemo(() => {\n    let projectStatusVal = null;\n    let productList = lang === \"vi\" ? PRODUCT_STATUS_VI : PRODUCT_STATUS_EN;\n    productList.map(item => {\n      if ((productById === null || productById === void 0 ? void 0 : productById.productStatus) === item.value) {\n        projectStatusVal = item;\n      }\n    });\n    return projectStatusVal;\n  }, [productById, lang]);\n\n  const onSubmit = values => {\n    const body = {\n      productName: values.productName,\n      price: Number(values.price),\n      productStatus: String(values.projectStatus.value),\n      projectId: selectedProject !== null && selectedProject !== void 0 && selectedProject.value ? selectedProject === null || selectedProject === void 0 ? void 0 : selectedProject.value : selectProject[0][\"value\"],\n      block: String(values.block),\n      floor: String(values.floor),\n      note: String(values.note)\n    };\n    servicesProductAPI.updateProduct(body, String(productId)).then(res => {\n      if (res) {\n        toastr.success(\"Update successfully\");\n      }\n    });\n  };\n\n  const listProjectOptions = listProject.map(item => ({\n    label: item.name,\n    value: item.id\n  }));\n  const selectProject = listProject.filter(item => item.id === (productById === null || productById === void 0 ? void 0 : productById.projectId)).map(selected => ({\n    label: selected.name,\n    value: selected.id\n  }));\n  useEffect(() => {\n    servicesProjectAPI.fetchProjects(1, 200, companyID).then(items => {\n      setListProject(items.items);\n    });\n    setSelectedProject(selectProject[0]);\n  }, []);\n  useEffect(() => {\n    if (productId) {\n      dispatch(fetchProductAction.request(productId));\n    }\n  }, [productId]);\n  useEffect(() => {\n    if (productById) {\n      setProjectStatusSelect(_objectSpread(_objectSpread({}, projectStatusSelect), {}, {\n        label: productById.productStatus,\n        value: productById.productStatus\n      }));\n    }\n  }, [productById]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  role: \"button\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    href: `/${companyName}/products`,\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-arrow-left\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-l-10\",\n                  children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"card-title\",\n                    children: productById === null || productById === void 0 ? void 0 : productById.productName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-8 col-xlg-9 col-md-7\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"nav nav-tabs profile-tab\",\n                role: \"tablist\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"nav-link active\",\n                    \"data-toggle\": \"tab\",\n                    href: \"#profile\",\n                    role: \"tab\",\n                    children: `${translator(\"lead_page.text_detail\")}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"nav-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"nav-link\",\n                    \"data-toggle\": \"tab\",\n                    href: \"#attachments\",\n                    role: \"tab\",\n                    children: `${translator(\"lead_page.text_attachments\")}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tab-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tab-pane active\",\n                  id: \"profile\",\n                  role: \"tabpanel\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `card-body`,\n                    children: productById && productById.id === productId && /*#__PURE__*/_jsxDEV(Formik, {\n                      initialValues: {\n                        productName: productById === null || productById === void 0 ? void 0 : productById.productName,\n                        price: productById === null || productById === void 0 ? void 0 : productById.price,\n                        block: productById === null || productById === void 0 ? void 0 : productById.block,\n                        floor: productById === null || productById === void 0 ? void 0 : productById.floor,\n                        note: productById === null || productById === void 0 ? void 0 : productById.note,\n                        projectStatus: getInitProjectStatus,\n                        projectName: selectedProject\n                      },\n                      onSubmit: onSubmit // validationSchema={validate}\n                      ,\n                      children: props => {\n                        const {\n                          handleBlur\n                        } = props;\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(Form, {\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row mt-4\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: /*#__PURE__*/_jsxDEV(InputField, {\n                                  label: `${translator(\"product_page.text_product_name\")}`,\n                                  name: \"productName\",\n                                  id: \"productName\",\n                                  type: \"text\",\n                                  handleBlur: handleBlur,\n                                  required: true\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 271,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 270,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                                  children: translator(\"product_page.text_project_name\")\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 283,\n                                  columnNumber: 39\n                                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                                  name: \"projectName\",\n                                  id: \"projectName\",\n                                  options: listProjectOptions,\n                                  className: \"mt-2\",\n                                  onChange: e => {\n                                    const step = {\n                                      label: e.label,\n                                      value: e.value\n                                    };\n                                    setSelectedProject(step);\n                                  },\n                                  defaultValue: selectProject[0]\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 288,\n                                  columnNumber: 39\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 282,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 269,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row mt-2\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: /*#__PURE__*/_jsxDEV(SelectField, {\n                                  label: `${translator(\"product_page.text_product_status\")}`,\n                                  name: \"projectStatus\",\n                                  id: \"projectStatus\",\n                                  options: lang === \"vi\" ? PRODUCT_STATUS_VI : PRODUCT_STATUS_EN\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 306,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 305,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: /*#__PURE__*/_jsxDEV(CurrencyInput, {\n                                  label: `${translator(\"product_page.text_price\")}`,\n                                  id: \"price\",\n                                  name: \"price\",\n                                  handleBlur: handleBlur\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 320,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 319,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 304,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row mt-2\",\n                              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: /*#__PURE__*/_jsxDEV(InputField, {\n                                  label: \"Block\",\n                                  name: \"block\",\n                                  id: \"block\",\n                                  type: \"text\",\n                                  handleBlur: handleBlur\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 332,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 331,\n                                columnNumber: 37\n                              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-6\",\n                                children: /*#__PURE__*/_jsxDEV(InputField, {\n                                  label: `${translator(\"product_page.text_floor\")}`,\n                                  name: \"floor\",\n                                  id: \"floor\",\n                                  type: \"text\",\n                                  handleBlur: handleBlur\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 341,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 340,\n                                columnNumber: 37\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 330,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row mt-2\",\n                              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-12\",\n                                children: /*#__PURE__*/_jsxDEV(InputField, {\n                                  label: `${translator(\"product_page.text_note\")}`,\n                                  name: \"note\",\n                                  id: \"note\",\n                                  type: \"text\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 354,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 353,\n                                columnNumber: 37\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 352,\n                              columnNumber: 35\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"row mt-4\",\n                              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"col-12\",\n                                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                                  className: \"btn btn-success\",\n                                  type: \"submit\",\n                                  children: `${translator(\"lead_page.btn_update\")}`\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 366,\n                                  columnNumber: 39\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 365,\n                                columnNumber: 37\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 364,\n                              columnNumber: 35\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 268,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 267,\n                          columnNumber: 31\n                        }, this);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"tab-pane\",\n                  id: \"attachments\",\n                  role: \"tabpanel\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-body\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dropify-wrapper\",\n                      children: /*#__PURE__*/_jsxDEV(FileUploader, {\n                        handleChange: handleChange,\n                        name: \"file\",\n                        maxSize: 20,\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-cloud-up fz-20\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 393,\n                            columnNumber: 31\n                          }, this), `${translator(\"lead_page.text_upload\")}`]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 392,\n                          columnNumber: 29\n                        }, this),\n                        onSizeError: onSizeError\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 387,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-err mt-3\",\n                      children: errUpload\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 400,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex flex-wrap justify-content-between\",\n                      children: listAttachments.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-48 border p-3 mt-4 d-flex align-items-center justify-content-between\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-80 d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-zip fz-30\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 405,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"pd-left-15\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"\",\n                              children: file.name\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 407,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"text-note mt-1 fz-12\",\n                              children: [file.fileType, \" \", file.fileSize, \"kb\", \" \", file.fileDate]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 408,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 406,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 404,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-15 d-flex align-items-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-trash icon-cursor\",\n                            onClick: () => removeAttachment(index)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 416,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-download ml-3 mr-3\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 420,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 415,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 403,\n                        columnNumber: 27\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer\",\n      children: \"\\xA9 2022 CRM Dreamland\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n};\n\nexport default ProductDetailContainer;","map":{"version":3,"sources":["/Users/admin/Documents/personal-site/src/containers/Products/detail.tsx"],"names":["React","useState","useEffect","useMemo","useSelector","useDispatch","Formik","Form","Yup","FileUploader","toastr","useTranslation","Link","useRouter","PRODUCT_STATUS_VI","PRODUCT_STATUS_EN","InputField","SelectField","CurrencyInput","fetchProductAction","Cookies","ProjectAPI","ProductstAPI","Select","servicesProjectAPI","servicesProductAPI","ProductDetailContainer","t","translator","dispatch","router","lang","get","companyID","companyName","file","setFile","listAttachments","setlistAttachments","errUpload","setErrUpload","listProject","setListProject","projectNameSelect","setProjectNameSelect","label","value","projectStatusSelect","setProjectStatusSelect","productDetail","productId","query","selectedProject","setSelectedProject","productById","state","products","projects","all","items","validate","object","productName","string","max","required","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","handleChange","fileName","name","fileSize","size","fileDate","lastModifiedDate","fileNameArr","split","fileType","item","push","onSizeError","removeAttachment","index","splice","getInitProjectStatus","projectStatusVal","productList","map","productStatus","onSubmit","values","body","price","Number","String","projectStatus","projectId","selectProject","block","floor","note","updateProduct","then","res","success","listProjectOptions","id","filter","selected","fetchProjects","request","projectName","props","handleBlur","e","step"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Formik, Form } from \"formik\";\nimport Router from \"next/router\";\nimport * as Yup from \"yup\";\nimport { FileUploader } from \"react-drag-drop-files\";\nimport toastr from \"toastr\";\nimport { useTranslation } from \"react-i18next\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { TRootState } from \"src/state-management/reducers\";\nimport { PRODUCT_STATUS_VI, PRODUCT_STATUS_EN } from \"./constants\";\nimport InputField from \"../../components/ModalCreate/InputField\";\nimport SelectField from \"../../components/ModalCreate/SelectField\";\nimport CurrencyInput from \"../../components/ModalCreate/CurrencyInput\";\nimport {\n  fetchProductAction,\n  updateProductAction,\n} from \"src/state-management/actions/products\";\nimport Cookies from \"js-cookie\";\nimport { ProjectAPI } from \"../../services/identity/project-api\";\nimport { ProductstAPI } from \"../../services/identity/products\";\nimport Select from \"react-select\";\n\ntype TProductsContainerProps = {};\n\ntype ProductType = {\n  productName: string;\n  price: string;\n  projectStatus: any;\n  projectName: any;\n  block: string;\n  floor: string;\n  note: string;\n};\n\nconst servicesProjectAPI = new ProjectAPI();\nconst servicesProductAPI = new ProductstAPI();\nconst ProductDetailContainer: React.FC<TProductsContainerProps> = ({}) => {\n  const { t: translator } = useTranslation();\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const lang = Cookies.get(\"lang\");\n  const companyID = Cookies.get(\"companyID\");\n  const companyName = Cookies.get(\"companyName\");\n\n  const [file, setFile] = useState(null);\n  const [listAttachments, setlistAttachments] = useState<any[]>([]);\n  const [errUpload, setErrUpload] = useState(\"\");\n  const [listProject, setListProject] = useState<any[]>([]);\n  const [projectNameSelect, setProjectNameSelect] = useState<any>({\n    label: \"\",\n    value: \"\",\n  });\n  const [projectStatusSelect, setProjectStatusSelect] = useState<any>({\n    label: \"\",\n    value: \"\",\n  });\n\n  const { productDetail: productId } = router.query;\n\n  const [selectedProject, setSelectedProject] = useState<any>({\n    label: \"\",\n    value: \"\",\n  });\n\n  const productById = useSelector(\n    (state: TRootState) => state.products.productById\n  );\n  const projects = useSelector(\n    (state: TRootState) => state.projects.all?.items\n  );\n\n  const validate = Yup.object({\n    productName: Yup.string()\n      .max(\n        100,\n        `${translator(\"product_page.text_product_name\")} ${translator(\n          \"product_page.validate_100_characters\"\n        )}`\n      )\n      .required(\"Required\"),\n    // floor: Yup.string().matches(\n    //   /^[a-zA-Z0-9]+$/,\n    //   `#${translator(\"product_page.text_floor_caution\")}`\n    // ),\n    // block: Yup.string().max(\n    //   100,\n    //   `Block ${translator(\"product_page.validate_100_characters\")}`\n    // ),\n    // note: Yup.string().max(\n    //   1000,\n    //   `${translator(\"product_page.text_note\")} ${translator(\n    //     \"product_page.validate_1000_characters\"\n    //   )}`\n    // ),\n  });\n\n  function formatDate(date: any) {\n    var d = new Date(date),\n      month = \"\" + (d.getMonth() + 1),\n      day = \"\" + d.getDate(),\n      year = d.getFullYear();\n\n    if (month.length < 2) month = \"0\" + month;\n    if (day.length < 2) day = \"0\" + day;\n\n    return [day, month, year].join(\"-\");\n  }\n\n  const handleChange = (file: any) => {\n    let fileName = file.name;\n    let fileSize = file.size;\n    let fileDate = formatDate(file.lastModifiedDate);\n    let fileNameArr = fileName.split(\".\");\n    let fileType = fileNameArr[fileNameArr.length - 1];\n    let item = {\n      name: fileName,\n      fileSize: fileSize,\n      fileDate: fileDate,\n      fileType: fileType,\n    };\n    listAttachments.push(item);\n    setFile(file);\n    setlistAttachments(listAttachments);\n    setErrUpload(\"\");\n  };\n\n  const onSizeError = () => {\n    setErrUpload(\"Uploaded files must be smaller than 20mb\");\n  };\n\n  const removeAttachment = (index: number) => {\n    listAttachments.splice(index, 1);\n    setlistAttachments(listAttachments);\n    setFile(listAttachments as any);\n  };\n\n  const getInitProjectStatus = useMemo(() => {\n    let projectStatusVal = null;\n    let productList = lang === \"vi\" ? PRODUCT_STATUS_VI : PRODUCT_STATUS_EN;\n    productList.map((item) => {\n      if (productById?.productStatus === item.value) {\n        projectStatusVal = item;\n      }\n    });\n    return projectStatusVal;\n  }, [productById, lang]);\n\n  const onSubmit = (values: ProductType) => {\n    const body = {\n      productName: values.productName,\n      price: Number(values.price),\n      productStatus: String(values.projectStatus.value),\n      projectId: selectedProject?.value\n        ? selectedProject?.value\n        : selectProject[0][\"value\"],\n      block: String(values.block),\n      floor: String(values.floor),\n      note: String(values.note),\n    };\n    servicesProductAPI.updateProduct(body, String(productId)).then((res) => {\n      if (res) {\n        toastr.success(\"Update successfully\");\n      }\n    });\n  };\n\n  const listProjectOptions = listProject.map((item) => ({\n    label: item.name,\n    value: item.id,\n  }));\n\n  const selectProject = listProject\n    .filter((item) => item.id === productById?.projectId)\n    .map((selected: any) => ({ label: selected.name, value: selected.id }));\n\n  useEffect(() => {\n    servicesProjectAPI.fetchProjects(1, 200, companyID).then((items) => {\n      setListProject(items.items);\n    });\n    setSelectedProject(selectProject[0]);\n  }, []);\n\n  useEffect(() => {\n    if (productId) {\n      dispatch(fetchProductAction.request(productId as string));\n    }\n  }, [productId]);\n\n  useEffect(() => {\n    if (productById) {\n      setProjectStatusSelect({\n        ...projectStatusSelect,\n        label: productById.productStatus,\n        value: productById.productStatus,\n      });\n    }\n  }, [productById]);\n\n  return (\n    <div id=\"main-wrapper\">\n      <div className=\"page-wrapper\">\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-12\">\n              <div className=\"card-body\">\n                <div className=\"d-flex\">\n                  <div role=\"button\">\n                    <Link href={`/${companyName}/products`}>\n                      <i className=\"fas fa-arrow-left\"></i>\n                    </Link>\n                  </div>\n                  <div className=\"p-l-10\">\n                    <h4 className=\"card-title\">{productById?.productName}</h4>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-lg-8 col-xlg-9 col-md-7\">\n              <div className=\"card\">\n                <ul className=\"nav nav-tabs profile-tab\" role=\"tablist\">\n                  <li className=\"nav-item\">\n                    <a\n                      className=\"nav-link active\"\n                      data-toggle=\"tab\"\n                      href=\"#profile\"\n                      role=\"tab\"\n                    >\n                      {`${translator(\"lead_page.text_detail\")}`}\n                    </a>\n                  </li>\n                  <li className=\"nav-item\">\n                    <a\n                      className=\"nav-link\"\n                      data-toggle=\"tab\"\n                      href=\"#attachments\"\n                      role=\"tab\"\n                    >\n                      {`${translator(\"lead_page.text_attachments\")}`}\n                    </a>\n                  </li>\n                </ul>\n\n                <div className=\"tab-content\">\n                  <div className=\"tab-pane active\" id=\"profile\" role=\"tabpanel\">\n                    <div className={`card-body`}>\n                      {productById && productById.id === productId && (\n                        <Formik\n                          initialValues={{\n                            productName: productById?.productName,\n                            price: productById?.price,\n                            block: productById?.block,\n                            floor: productById?.floor,\n                            note: productById?.note,\n                            projectStatus: getInitProjectStatus,\n                            projectName: selectedProject,\n                          }}\n                          onSubmit={onSubmit}\n                          // validationSchema={validate}\n                        >\n                          {(props) => {\n                            const { handleBlur } = props;\n                            return (\n                              <div>\n                                <Form>\n                                  <div className=\"row mt-4\">\n                                    <div className=\"col-6\">\n                                      <InputField\n                                        label={`${translator(\n                                          \"product_page.text_product_name\"\n                                        )}`}\n                                        name=\"productName\"\n                                        id=\"productName\"\n                                        type=\"text\"\n                                        handleBlur={handleBlur}\n                                        required\n                                      />\n                                    </div>\n                                    <div className=\"col-6\">\n                                      <label>\n                                        {translator(\n                                          \"product_page.text_project_name\"\n                                        )}\n                                      </label>\n                                      <Select\n                                        name=\"projectName\"\n                                        id=\"projectName\"\n                                        options={listProjectOptions}\n                                        className=\"mt-2\"\n                                        onChange={(e: any) => {\n                                          const step = {\n                                            label: e.label,\n                                            value: e.value,\n                                          };\n                                          setSelectedProject(step);\n                                        }}\n                                        defaultValue={selectProject[0]}\n                                      />\n                                    </div>\n                                  </div>\n                                  <div className=\"row mt-2\">\n                                    <div className=\"col-6\">\n                                      <SelectField\n                                        label={`${translator(\n                                          \"product_page.text_product_status\"\n                                        )}`}\n                                        name=\"projectStatus\"\n                                        id=\"projectStatus\"\n                                        options={\n                                          lang === \"vi\"\n                                            ? PRODUCT_STATUS_VI\n                                            : PRODUCT_STATUS_EN\n                                        }\n                                      />\n                                    </div>\n                                    <div className=\"col-6\">\n                                      <CurrencyInput\n                                        label={`${translator(\n                                          \"product_page.text_price\"\n                                        )}`}\n                                        id=\"price\"\n                                        name=\"price\"\n                                        handleBlur={handleBlur}\n                                      />\n                                    </div>\n                                  </div>\n                                  <div className=\"row mt-2\">\n                                    <div className=\"col-6\">\n                                      <InputField\n                                        label=\"Block\"\n                                        name=\"block\"\n                                        id=\"block\"\n                                        type=\"text\"\n                                        handleBlur={handleBlur}\n                                      />\n                                    </div>\n                                    <div className=\"col-6\">\n                                      <InputField\n                                        label={`${translator(\n                                          \"product_page.text_floor\"\n                                        )}`}\n                                        name=\"floor\"\n                                        id=\"floor\"\n                                        type=\"text\"\n                                        handleBlur={handleBlur}\n                                      />\n                                    </div>\n                                  </div>\n                                  <div className=\"row mt-2\">\n                                    <div className=\"col-12\">\n                                      <InputField\n                                        label={`${translator(\n                                          \"product_page.text_note\"\n                                        )}`}\n                                        name=\"note\"\n                                        id=\"note\"\n                                        type=\"text\"\n                                      />\n                                    </div>\n                                  </div>\n                                  <div className=\"row mt-4\">\n                                    <div className=\"col-12\">\n                                      <button\n                                        className=\"btn btn-success\"\n                                        type=\"submit\"\n                                      >\n                                        {`${translator(\n                                          \"lead_page.btn_update\"\n                                        )}`}\n                                      </button>\n                                    </div>\n                                  </div>\n                                </Form>\n                              </div>\n                            );\n                          }}\n                        </Formik>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"tab-pane\" id=\"attachments\" role=\"tabpanel\">\n                    <div className=\"card-body\">\n                      <div className=\"dropify-wrapper\">\n                        <FileUploader\n                          handleChange={handleChange}\n                          name=\"file\"\n                          maxSize={20}\n                          children={\n                            <p className=\"d-flex align-items-center\">\n                              <i className=\"ti-cloud-up fz-20\"></i>\n                              {`${translator(\"lead_page.text_upload\")}`}\n                            </p>\n                          }\n                          onSizeError={onSizeError}\n                        />\n                      </div>\n                      <p className=\"text-err mt-3\">{errUpload}</p>\n                      <div className=\"d-flex flex-wrap justify-content-between\">\n                        {listAttachments.map((file, index) => (\n                          <div className=\"w-48 border p-3 mt-4 d-flex align-items-center justify-content-between\">\n                            <div className=\"w-80 d-flex align-items-center\">\n                              <i className=\"ti-zip fz-30\"></i>\n                              <div className=\"pd-left-15\">\n                                <div className=\"\">{file.name}</div>\n                                <div className=\"text-note mt-1 fz-12\">\n                                  {file.fileType} {file.fileSize}kb{\" \"}\n                                  {file.fileDate}\n                                </div>\n                              </div>\n                            </div>\n\n                            <div className=\"w-15 d-flex align-items-center\">\n                              <i\n                                className=\"ti-trash icon-cursor\"\n                                onClick={() => removeAttachment(index)}\n                              ></i>\n                              <i className=\"ti-download ml-3 mr-3\"></i>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <footer className=\"footer\"> 2022 CRM Dreamland</footer>\n    </div>\n  );\n};\n\nexport default ProductDetailContainer;\n"]},"metadata":{},"sourceType":"module"}