{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/admin/Documents/personal-site/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport Cookies from \"js-cookie\";\nimport { usersAPI } from \"../../services/identity/users\";\nimport { useRouter } from \"next/router\";\n\nvar HeaderContainer = function HeaderContainer() {\n  var _localStorage$getItem;\n\n  var defaultLang = Cookies.get(\"lang\");\n  var companyName = Cookies.get(\"companyName\");\n  var companyID = Cookies.get(\"companyID\");\n  var servicesUsersAPI = new usersAPI();\n\n  var _useState = useState([]),\n      listCompany = _useState[0],\n      setListCompany = _useState[1];\n\n  var accountInfo = JSON.parse((_localStorage$getItem = localStorage.getItem(\"accounts\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"{}\");\n  var Router = useRouter();\n  useEffect(function () {\n    servicesUsersAPI.getListCompany(accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.uuid, 1, 4).then(function (res) {\n      var _res$data;\n\n      // console.log(res.data?.items);\n      var listCompany = (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.items.filter(function (item) {\n        return item.companyId !== companyID;\n      });\n      setListCompany(listCompany);\n    });\n  }, []);\n\n  var handleClickChangeLang = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(lang) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              Cookies.set(\"lang\", lang);\n              window.location.reload();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleClickChangeLang(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onChooseCompany = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id, name) {\n      var _localStorage$getItem2;\n\n      var accountInfo;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              Cookies.set(\"companyID\", id);\n              Cookies.set(\"companyName\", name);\n              accountInfo = JSON.parse((_localStorage$getItem2 = localStorage.getItem(\"accounts\")) !== null && _localStorage$getItem2 !== void 0 ? _localStorage$getItem2 : \"{}\");\n              servicesUsersAPI.lastAccessCompany(accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.uuid, id).then(function (res) {\n                window.location.href = \"/\".concat(name, \"/dashboard\");\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onChooseCompany(_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    id: \"header\",\n    children: /*#__PURE__*/_jsx(\"header\", {\n      className: \"topbar\",\n      children: /*#__PURE__*/_jsxs(\"nav\", {\n        className: \"navbar top-navbar navbar-expand-md navbar-dark\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"navbar-header\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"navbar-brand\",\n            href: \"/dashboard\",\n            children: /*#__PURE__*/_jsx(\"b\", {\n              children: \"CRM DREAMLAND\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"navbar-collapse\",\n          children: [/*#__PURE__*/_jsxs(\"ul\", {\n            className: \"navbar-nav mr-auto\",\n            children: [/*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"nav-link nav-toggler d-block d-md-none waves-effect waves-dark\",\n                href: \"javascript:void(0)\",\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"ti-menu\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"nav-link sidebartoggler d-none waves-effect waves-dark\",\n                href: \"javascript:void(0)\",\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"icon-menu\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsx(\"form\", {\n                className: \"app-search d-none d-md-block d-lg-block\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  placeholder: \"Search & enter\"\n                })\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"ul\", {\n            className: \"navbar-nav my-lg-0\",\n            children: [/*#__PURE__*/_jsxs(\"li\", {\n              className: \"nav-item dropdown\",\n              children: [/*#__PURE__*/_jsxs(\"a\", {\n                className: \"nav-link dropdown-toggle waves-effect waves-dark\",\n                href: \"\",\n                id: \"2\",\n                \"data-toggle\": \"dropdown\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": \"false\",\n                children: [/*#__PURE__*/_jsx(\"i\", {\n                  className: \"fa fa-building\",\n                  \"aria-hidden\": \"true\"\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"notify\",\n                  children: [/*#__PURE__*/_jsx(\"span\", {\n                    className: \"heartbit\"\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: \"point\"\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"dropdown-menu mailbox dropdown-menu-right animated bounceInDown\",\n                \"aria-labelledby\": \"2\",\n                children: /*#__PURE__*/_jsxs(\"ul\", {\n                  children: [/*#__PURE__*/_jsx(\"li\", {\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"message-center\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"mail-contnet\",\n                        children: listCompany.length > 0 ? listCompany.map(function (company, index) {\n                          return /*#__PURE__*/_jsx(\"a\", {\n                            onClick: function onClick() {\n                              onChooseCompany(company.companyId, company.company.accessLink);\n                            },\n                            children: /*#__PURE__*/_jsx(\"h5\", {\n                              children: company.company.name\n                            })\n                          }, \"conpany_\".concat(index));\n                        }) : /*#__PURE__*/_jsx(\"div\", {\n                          className: \"pd-15\",\n                          children: \"You have only 1 company\"\n                        })\n                      })\n                    })\n                  }), /*#__PURE__*/_jsx(\"li\", {\n                    className: \"nav-item dropdown\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"message-center\",\n                      children: /*#__PURE__*/_jsx(\"div\", {\n                        className: \"mail-contnet\",\n                        children: /*#__PURE__*/_jsx(\"a\", {\n                          href: \"/\".concat(companyName, \"/setting/companies\"),\n                          children: \"See all\"\n                        })\n                      })\n                    })\n                  })]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item dropdown u-pro\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"dropdown-menu dropdown-menu-right animated flipInY\",\n                children: [/*#__PURE__*/_jsxs(\"a\", {\n                  href: \"javascript:void(0)\",\n                  className: \"dropdown-item\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"ti-user\"\n                  }), \" My Profile\"]\n                }), /*#__PURE__*/_jsxs(\"a\", {\n                  href: \"javascript:void(0)\",\n                  className: \"dropdown-item\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"ti-wallet\"\n                  }), \" My Balance\"]\n                }), /*#__PURE__*/_jsxs(\"a\", {\n                  href: \"javascript:void(0)\",\n                  className: \"dropdown-item\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"ti-email\"\n                  }), \" Inbox\"]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"dropdown-divider\"\n                }), /*#__PURE__*/_jsxs(\"a\", {\n                  href: \"javascript:void(0)\",\n                  className: \"dropdown-item\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"ti-settings\"\n                  }), \" Account Setting\"]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"dropdown-divider\"\n                }), /*#__PURE__*/_jsxs(\"a\", {\n                  href: \"login.html\",\n                  className: \"dropdown-item\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"fa fa-power-off\"\n                  }), \" Logout\"]\n                })]\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"nav-link  waves-effect waves-light\",\n                href: \"/\".concat(companyName, \"/setting\"),\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"ti-settings\"\n                })\n              })\n            }), /*#__PURE__*/_jsx(\"li\", {\n              className: \"nav-item\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                className: \"nav-link  waves-effect waves-light\",\n                onClick: function onClick() {\n                  localStorage.removeItem(\"accounts\");\n                  Cookies.remove(\"crm_token\");\n                  Cookies.remove(\"isAuthenticated\");\n                  Cookies.remove(\"companyName\");\n                  Cookies.remove(\"companyID\");\n                  window.location.reload();\n                },\n                children: /*#__PURE__*/_jsx(\"i\", {\n                  className: \"fa fa-power-off\"\n                })\n              })\n            }), /*#__PURE__*/_jsxs(\"li\", {\n              className: \"nav-item dropdown\",\n              children: [/*#__PURE__*/_jsx(\"a\", {\n                className: \"nav-link dropdown-toggle waves-effect waves-dark\",\n                \"data-toggle\": \"dropdown\",\n                \"aria-haspopup\": \"true\",\n                \"aria-expanded\": \"false\",\n                children: defaultLang === \"vi\" ? /*#__PURE__*/_jsx(\"img\", {\n                  src: \"/images/icon_vn.png\",\n                  alt: \"user\",\n                  className: \"icon_flag\"\n                }) : /*#__PURE__*/_jsx(\"img\", {\n                  src: \"/images/icon_us.png\",\n                  alt: \"user\",\n                  className: \"icon_flag\"\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"dropdown-menu dropdown-menu-right mailbox animated slideInRight\",\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  children: /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"nav-link dropdown-toggle waves-effect waves-dark\",\n                    \"data-toggle\": \"dropdown\",\n                    \"aria-haspopup\": \"true\",\n                    \"aria-expanded\": \"false\",\n                    onClick: function onClick() {\n                      handleClickChangeLang(\"en\");\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: \"/images/icon_us.png\",\n                      alt: \"user\",\n                      className: \"icon_flag\"\n                    }), \"English\"]\n                  })\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  children: /*#__PURE__*/_jsxs(\"a\", {\n                    className: \"nav-link dropdown-toggle waves-effect waves-dark\",\n                    \"data-toggle\": \"dropdown\",\n                    \"aria-haspopup\": \"true\",\n                    \"aria-expanded\": \"false\",\n                    onClick: function onClick() {\n                      handleClickChangeLang(\"vi\");\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: \"/images/icon_vn.png\",\n                      alt: \"user\",\n                      className: \"icon_flag\"\n                    }), \"Ti\\u1EBFng Vi\\u1EC7t\"]\n                  })\n                })]\n              })]\n            })]\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport default HeaderContainer;","map":null,"metadata":{},"sourceType":"module"}